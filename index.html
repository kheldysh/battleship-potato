<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>React!</title>
    <script src="https://unpkg.com/react/dist/react.js"></script>
    <script src="https://unpkg.com/react-dom/dist/react-dom.js"></script>
    <script src="https://unpkg.com/redux/dist/redux.js"></script>
    <script src="https://unpkg.com/react-redux/dist/react-redux.js"></script>
    <script src="https://unpkg.com/babel-standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/superagent/3.5.2/superagent.min.js"></script>
    <style type="text/css">
        table {
            background: blue;
        }

        td {
            border: 1px solid white;
            color: white;
            border-collapse: collapse;
            height: 40px;
            width: 40px;
            text-align: center;

        }

        .field {
            float: left;
            margin-right: 30px;
        }
    </style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
    class List extends React.Component {
        constructor(props) {
            super(props);
            this.state = {
//                items: [1, 2, 3]
                grid: []
            };
        }

        componentDidMount() {
            window.superagent.get('http://localhost:3000/start_game').end((err, res) => {
                const response = JSON.parse(res.text);
//                console.log(JSON.parse(res.text));
                this.setState({
                   grid: response.grid
                });
            });
        }

        handleClick() {
            this.setState({
                items: [...this.state.items, this.state.items.length + 1]
            });
        }
        render() {
            if (!this.state.grid) return null;

            return (
                <div>
                    <div className="field">
                        Enemy field
                        <table>
                            <tbody>
                            {this.state.grid.map((row, index) =>
                                    <tr key={index}>
                                        {row.map((cell, cellIndex) =>
                                                <td key={`${index}-${cellIndex}`}>
                                                    {cell}
                                                </td>
                                        )}
                                    </tr>
                            )}
                            </tbody>
                        </table>
                    </div>

                    <div className="field">
                        Player field
                        <table>
                            <tbody>
                            {this.state.grid.map((row, index) =>
                                    <tr key={index}>
                                        {row.map((cell, cellIndex) =>
                                                <td key={`${index}-${cellIndex}`}>
                                                    {cell}
                                                </td>
                                        )}
                                    </tr>
                            )}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        }
    }
    ReactDOM.render(<List items={[1, 2, 3]} />, document.getElementById('root'));
</script>
</body>
</html>
